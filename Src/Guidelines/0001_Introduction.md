<!--
NOTE: Requires Markdown Extra. See http://michelf.ca/projects/php-markdown/extra/
 --> 

# 1. Введение
## 1.1. Что это?

Целью создания этого списка правил является попытка установить стандарты написания кода на C#, которые были бы удобными и практичными одновременно. Само собой, мы практикуем то, что создали. Эти правила являются одним из тех стандартов, которые лежат в основе нашей ежедневной работы в [Aviva Solutions](http://www.avivasolutions.nl). Не все эти правила имеют четкое обоснование. Некоторые из них просто приняты у нас в качестве стандартов. В конце-концов, не столько важен сам выбор, а важно то, как строго вы следуйте выбранным правилам.

[Статический анализатор кода](http://msdn.microsoft.com/en-us/library/dd264939.aspx) VisualStudio (который также известен как FxComp) и [StyleCop](http://stylecop.codeplex.com/) могут автоматически применять многие из правил кодирования и оформления путем анализа скомпилированных сборок. Вы можете сконфигурировать их таким образом, чтобы анализ производился во время компиляции или был неотъемлемой частью непрерывной или ежедневной сборки. Этот документ просто добавляет дополнительные правила и рекомендации, но его вспомогательный сайт [www.csharpcodingguidelines.com](http://www.csharpcodingguidelines.com) предоставляет список правил анализа кода, необходимых в зависимости от того, с какой базой кода вы работаете.

## 1.2. Зачем мне это использовать?

Некоторые воспринимают стандарты написания кода как некие ограничения, которые ущемляют свободу творчества. Но тем не менее такой подход оправдан и проверен в течение многих лет. Почему? Потому, что не каждый разработчик знает, что:

- на то, чтобы разобраться в коде уходит в 10 раз больше времени, чем на то, чтобы его изменить;
- не каждый разработчик знает о тонкостях использования основных конструкций в C#;
- не каждый знает о том, каких соглашений .NET Framework следует придерживаться, например, при использовании `IDisposable` или LINQ с его отложенным исполнением;
- не каждый знает, как частные решения какой-либо задачи могут повлиять на производительность, безопасность, поддержку нескольких языков и т.д.;
- не каждый разработчик сможет понять красивый, но абстрактный код другого разработчика;

## 1.3. Базовые принципы

Имеется много неочевидных вещей, с которыми я сталкивался в моей работе в качестве консультанта и которые заслуживают упоминания как минимум в одной рекомендации по написанию кода. К сожалению, объем этого руководства должен находиться в разумных пределах. Однако, чтобы ни подумали некоторые начинающие разработчики, если я что-то не упомянул в этом документе, это не значит, что это не заслуживает внимания.

С учетом вышесказанного вам следует понимать, что данный документ не в силах охватить все ситуации, с которыми вы можете столкнуться. В любом спорном случае вам следует ссылаться на базовые принципы, которые применимы в любой ситуации вне зависимости от контекста. К ним относятся:

- The Principle of Least Surprise. «Правило наименьшего удивления». Вы должны выбирать наиболее очевидное решение для своих задач, чтобы не сбить с толку других разработчиков и сделать код более понятным
- Keep It Simple Stupid (или KISS). Дословно – «Делай это проще, тупица». Этот принцип гласит, что для решения поставленных задач необходимо выбирать наиболее простое решение
- You Ain’t Gonne Need It (или YAGNI). «Вам это не понадобится». Он гласит: «Работайте над решением текущих задач, не пишите код только потому, что думаете, будто он пригодится вам в дальнейшем (вы можете предсказывать будущее?)»
- Don't Repeat Yourself (или DRY). «Не повторяйся». Этот принцип призывает вас воздержаться от дублирования кода в пределах компонента, репозитория или [связанного контекста](http://martinfowler.com/bliki/BoundedContext.html), и при этом не забыть об [эвристическом правиле трех](http://lostechies.com/derickbailey/2012/10/31/abstraction-the-rule-of-three/).
- В общем случае не обязательно, чтобы вся кодовая база строго соответствовала данным рекомендациям. Тем не менее, она должна соответствовать им настолько, насколько это возможно.

Разработчик может элегантно решить какую-либо проблему, но если при этом его код слишком сложный для понимания, имеет необычное поведение или пытается решить проблемы, которых еще не существует, то вероятнее всего, что выбранное решение не является верным и нуждается в переработке. Наихудшим ответом в этом случае может быть только "Но ведь это работает?".

## 1.4. С чего мне начать?

- Попросите всех разработчиков внимательно прочитать этот документ хотя бы один раз. Это должно дать им понимание того, какие принципы в нем содержатся. 
- Убедитесь, что всегда имеются под рукой несколько печатных копий [кратких ссылок](http://www.csharpcodingguidelines.com/) на данное руководство. 
- Включите наиболее значимые правила в ваш [Project Checklist](http://www.continuousimprover.com/2010/03/alm-practices-5-checklists.html), на соответствие оставшимся правилам делайте проверку во время [Peer Review](http://www.dennisdoomen.net/2010/02/tfs-development-practices-part-2-peer.html). 
- Склонируйте [оригинальную версию](https://github.com/dennisdoomen/csharpguidelines) рекомендаций на [GitHub](https://github.com/) и создайте [свою](https://github.com/dennisdoomen/csharpguidelines/blob/master/LICENSE.md) версию этого документа.
- Решите, какие правила статического анализа применимы к вашему проекту и сохраните их где-то, например в вашей системе контроля версийю Или создайте свой набор правил статического анализа для Visual Studio. [Сайт-спутник](http://www.csharpcodingguidelines.com/) предлагает набор правил для наборы правил для бизнес-приложений и для более общей кодовой базы (например библиотеки и фреймворки).
- Пополните ваш [настраиваемый словарь анализа кода](http://msdn.microsoft.com/en-us/library/bb514188.aspx) терминами, именами и понятиями, специфичными для вашей компании или области деятельности. Если вы этого не сделаете, статический анализатор будет выводить предупреждения на конструкции, которые не будут включены в его внутренний словарь. 
- Настройте VisualStudio выполнять проверку на следование выбранным правилам статического анализа в качестве части релизной сборки. Тогда они не будут служить помехой при разработке и отладке, но могут быть запущены при переключении на релизную конфигурацию. 
- Добавьте в чеклист проекта пункты проверки на следование рекомендациям, чтобы быть уверенным, что весь новый код им соответствует, или используйте соответствующую [политику чекинов](http://msdn.microsoft.com/en-us/library/ms182075(v=vs.110).aspx) или настройте [хук для git](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)  чтобы быт обеспечить соблюдение данных правил. 
- [ReSharper](http://www.jetbrains.com/resharper/) имеет интеллектуальный инспектор кода, который при некоторой настройке уже поддерживает многие требования данного руководства. Он будет автоматически выделять любой код, который не соответствует правилам именования (например, стиль именования паскаль или верблюжья нотация), находить мертвый код и делать любые другие проверки. Одного клика мыши (или сочетания горячих клавиш) будет достаточно для того, чтоб исправить это. 
- ReSharper, кроме всего прочего, имеет окно File Structure, которое дает общее представление о членах вашего класса или интерфейса и позволяет вам легко перемещать их с помощью простого перетаскивания.
- Используя [GhostDoc](http://submain.com/products/ghostdoc.aspx), вы можете генерировать XML комментарии, используя сочетания горячих клавиш. Вся прелесть заключается в том, что это позволяет точно следовать стилю MSDN документации. Тем не менее, не злоупотребляйте этим инструментом и используйте его только в качестве стартового. 

## 1.5. Почему вы создали это?

Идея пришла в 2002 году, когда Вику Харторгу (Philips Medical System) и мне была поставлена задача написания [стандартов кодирования](http://www.tiobe.com/content/paperinfo/gemrcsharpcs.pdf) для C# 1.0. С тех пор я регулярно добавлял, удалял и изменял правила, основываясь на опыте, отзывах сообщества и новых инструментах, предоставляемых вместе с новыми релизами Visual Studio.

Кроме того, после прочтения книги [Роберта Мартина](https://sites.google.com/site/unclebobconsultingllc/) [«Чистый код: Создание, анализ и рефакторинг»](http://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882)я загорелся его идеями и решил включить некоторые из них в качестве правил. Хочу заметить, что этот документ ни в коем случае не является заменой его книги. Я искренне рекомендую прочесть его книгу, чтобы твердо усвоить принципы, лежащие в основе его рекомендаций.

К тому же я решил дополнить принципы написания кода некоторыми принципами проектирования. Они являются слишком важными, чтобы их игнорировать, и имеют большое влияние на достижение высокого качества кода.

## 1.6. Эти рекомендации являются стандартами?

В этом документе не утверждается, что в проектах необходимо строго соблюдать эти рекомендации. Также в нем не утверждается, что эти рекомендации более важны, чем остальные. Однако мы рекомендуем, чтобы вы сами решили, какие рекомендации важны, какие отклонения от стандарта можно допустить в проекте, кто будет консультантом в случае, если возникнут сомнения, и какую верстку использовать для исходного кода. Очевидно, именно вы должны принять эти решения, прежде чем приступить к реальной работе.

Чтобы помочь вам в выборе, я присвоил степень важности каждой рекомендации:

![](images/1.png) Правило, которым вы никогда не должны пренебрегать и которое применимо ко всем ситуациям

![](images/2.png) Настоятельно рекомендуется соблюдать это правило

![](images/3.png) Рекомендуется соблюдать это правило, но оно применимо не ко всем ситуациям

## 1.7. Обратная связь и отказ от ответственности

Этот документ был составлен во многом благодаря большому вкладу членов сообщества, статьям в блогах, онлайн дискуссиям и многим годам разработки на С#. Если у вас есть вопросы, замечания и предложения пишите мне на адрес [dennis.doomen@avivasolutions.nl](mailto:dennis.doomen@avivasolutions.nl), [публикуйте ошибки](https://github.com/dennisdoomen/csharpguidelines/issues) или делайте Pull Request на GitHub, или пишите мне в твиттер [http://twitter.com/ddoomen](http://twitter.com/ddoomen). Я буду пытаться регулярно пересматривать и переопубликовывать этот документ в соответствии с новыми идеями, опытом и замечаниями.

Хочу отметить, что эти рекомендации лишь отражают мое видение правильного кода на C#. Aviva Solutions не несет ответственности за любые прямые или косвенные убытки, вызванные применением стандартов, описанных в данном документе. Этот документ опубликован под лицензией Creative Commons license, в частности [The Creative Commons Attribution-ShareAlike 4.0](http://creativecommons.org/licenses/by-sa/4.0/). 
